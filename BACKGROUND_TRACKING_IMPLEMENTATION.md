# โ ุชูููุฐ ุงูุชุชุจุน ูู ุงูุฎูููุฉ - Background Tracking Implementation

**ุงูุชุงุฑูุฎ:** 2025-01-20  
**ุงูุญุงูุฉ:** โ ููุชูู

---

## ๐ ููุฎุต ุงูุชุบููุฑุงุช

ุชู ุชูููุฐ ูุธุงู ุชุชุจุน ูู ุงูุฎูููุฉ ูุดุงุจู ูุชุทุจูู Life360ุ ูุนูู ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู ุจุงููุงูู.

---

## โ ูุง ุชู ุฅุถุงูุชู

### 1. โ WorkManager
- **ุงูููู:** `pubspec.yaml`
- **ุงููุธููุฉ:** ููุงู ุฏูุฑูุฉ ูู 15 ุฏูููุฉ ูุญุฏ ุฃุฏูู
- **ุงูุญุงูุฉ:** โ ููุชูู

### 2. โ Foreground Service
- **ุงูููู:** `android/app/src/main/kotlin/.../LocationForegroundService.kt`
- **ุงููุธููุฉ:** ุฎุฏูุฉ ุชุนูู ูู ุงูุฎูููุฉ ูุน ุฅุดุนุงุฑ ุฏุงุฆู
- **ุงูุญุงูุฉ:** โ ููุชูู

### 3. โ Boot Receiver
- **ุงูููู:** `android/app/src/main/kotlin/.../BootReceiver.kt`
- **ุงููุธููุฉ:** ุจุฏุก ุงูุชุชุจุน ุชููุงุฆูุงู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
- **ุงูุญุงูุฉ:** โ ููุชูู

### 4. โ AndroidManifest.xml
- **ุงูุชุบููุฑุงุช:**
  - ุฅุถุงูุฉ `RECEIVE_BOOT_COMPLETED` permission
  - ุชุณุฌูู `LocationForegroundService`
  - ุชุณุฌูู `BootReceiver`
- **ุงูุญุงูุฉ:** โ ููุชูู

### 5. โ MainActivity.kt
- **ุงูุชุบููุฑุงุช:**
  - ุฅุถุงูุฉ MethodChannel ููุชุญูู ูู Foreground Service
  - ุฅุถุงูุฉ EventChannel ูุงุณุชูุจุงู ุชุญุฏูุซุงุช ุงููููุน
- **ุงูุญุงูุฉ:** โ ููุชูู

### 6. โ background_service.dart
- **ุงูุชุบููุฑุงุช:**
  - ุชููุฆุฉ WorkManager
  - ุจุฏุก/ุฅููุงู Foreground Service
  - ุงุณุชูุจุงู ุชุญุฏูุซุงุช ุงููููุน ูู Service
- **ุงูุญุงูุฉ:** โ ููุชูู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุจุฏุก ุงูุชุชุจุน:
```dart
await startLocationTracking();
```

### ุฅููุงู ุงูุชุชุจุน:
```dart
await stopLocationTracking();
```

---

## ๐ง ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. Foreground Service
- โ ูุนูู ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู
- โ ุฅุดุนุงุฑ ุฏุงุฆู ูุธูุฑ ูููุณุชุฎุฏู
- โ ุชุญุฏูุซ ุงูุฅุดุนุงุฑ ุจุงููููุน ูุงูุณุฑุนุฉ

### 2. WorkManager
- โ ููุงู ุฏูุฑูุฉ ูู 15 ุฏูููุฉ
- โ ูุนูู ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู
- โ ูุนูู ุญุชู ุนูุฏ ุฅุบูุงู ุงููุงุชู (ูู ูุถุน ุงูุณููู)

### 3. Auto-start
- โ ูุจุฏุฃ ุชููุงุฆูุงู ุจุนุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฌูุงุฒ
- โ ูุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุจู ุงูุจุฏุก

### 4. Battery Optimization
- โ ุทูุจ ุงุณุชุซูุงุก ูู ุชุญุณูู ุงูุจุทุงุฑูุฉ
- โ Wake Lock ูููุน ุฅููุงู ุงูุชุทุจูู

---

## ๐ฑ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุฅุบูุงู ุงูุชุทุจูู
1. ุงุจุฏุฃ ุงูุชุชุจุน
2. ุฃุบูู ุงูุชุทุจูู ูู Recent Apps
3. โ ูุฌุจ ุฃู ูุธูุฑ ุฅุดุนุงุฑ "ุชุชุจุน ุงููููุน ูุดุท"
4. โ ูุฌุจ ุฃู ูุณุชูุฑ ุงูุชุชุจุน

### ุงุฎุชุจุงุฑ 2: ุฅุนุงุฏุฉ ุงูุชุดุบูู
1. ุฃุนุฏ ุชุดุบูู ุงูุฌูุงุฒ
2. โ ูุฌุจ ุฃู ูุจุฏุฃ ุงูุชุชุจุน ุชููุงุฆูุงู
3. โ ูุฌุจ ุฃู ูุธูุฑ ุงูุฅุดุนุงุฑ

### ุงุฎุชุจุงุฑ 3: WorkManager
1. ุฃุบูู ุงูุชุทุจูู
2. ุงูุชุธุฑ 15 ุฏูููุฉ
3. โ ูุฌุจ ุฃู ูุชู ุฅุฑุณุงู ุงููููุน ุชููุงุฆูุงู

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃุฐููุงุช:**
   - ูุฌุจ ููุญ ุฃุฐููุงุช ุงููููุน (Foreground + Background)
   - ูุฌุจ ุงูููุงููุฉ ุนูู Battery Optimization exemption

2. **Android 15:**
   - ูุชุทูุจ `FOREGROUND_SERVICE_LOCATION` permission
   - ูุฏ ุชุญุชุงุฌ ุฃุฐููุงุช ุฅุถุงููุฉ ุญุณุจ ุงูุดุฑูุฉ ุงููุตูุนุฉ

3. **Battery Optimization:**
   - ุจุนุถ ุงูุดุฑูุงุช ุงููุตูุนุฉ (Xiaomi, Huawei) ูุฏููุง ูููุฏ ุฅุถุงููุฉ
   - ูุฏ ุชุญุชุงุฌ Auto-start permissions ุฎุงุตุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: Service ูุง ูุจุฏุฃ
**ุงูุญู:**
- ุชุญูู ูู ุงูุฃุฐููุงุช
- ุชุญูู ูู logs: `adb logcat | grep LocationService`

### ุงููุดููุฉ: WorkManager ูุง ูุนูู
**ุงูุญู:**
- ุชุญูู ูู ุชููุฆุฉ WorkManager ูู `main.dart`
- ุชุญูู ูู logs: `adb logcat | grep WorkManager`

### ุงููุดููุฉ: Boot Receiver ูุง ูุนูู
**ุงูุญู:**
- ุชุญูู ูู ุชุณุฌูู Receiver ูู AndroidManifest.xml
- ุชุญูู ูู logs: `adb logcat | grep BootReceiver`

---

## ๐ ุงูููุงุฑูุฉ ูุน Life360

| ุงูููุฒุฉ | Life360 | ุชุทุจููู ุงูุขู |
|--------|---------|-------------|
| Foreground Service | โ | โ |
| Persistent Notification | โ | โ |
| WorkManager | โ | โ |
| Auto-start | โ | โ |
| Boot Receiver | โ | โ |
| Battery Optimization | โ | โ |
| Wake Lock | โ | โ |

**ุงููุชูุฌุฉ:** โ ุชุทุจููู ุงูุขู ูุนูู ูุซู Life360!

---

**ุชู ุงูุชูููุฐ ุจูุงุณุทุฉ:** Flutter & Dart Expert  
**ุงูุชุงุฑูุฎ:** 2025-01-20

