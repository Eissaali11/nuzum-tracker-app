# ๐ง ุฅุตูุงุญ ูุดููุฉ ุนุฏู ุฅุฑุณุงู ุตูุฑ ุงููุญุต ุงูุฏูุฑู ุฅูู ุงูุณูุฑูุฑ

## ๐ ุงููุดููุฉ

ุนูุฏ ุฅูุดุงุก ูุญุต ุฏูุฑู ููุณูุงุฑุฉ ูุฑูุน ุตูุฑุ **ูุง ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ููุง ุงูุตูุฑ ุฅูู ุงูุณูุฑูุฑ**.

---

## ๐ ุงูุฃุณุจุงุจ ุงูุชู ุชู ุงูุชุดุงููุง

### 1. **ููุน ุงููุญุต ุบูุฑ ุตุญูุญ** โ
**ุงููููุน:** `lib/services/inspection_upload_service.dart` - ุงูุณุทุฑ 226

**ุงููุดููุฉ:**
```dart
inspectionType: 'delivery', // โ ุฎุทุฃ - delivery ููุณ ูููุญุต ุงูุฏูุฑู
```

**ุงูุญู:**
```dart
inspectionType: 'vehicle_receipt', // โ ุตุญูุญ - ูููุญุต ุงูุฏูุฑู
```

**ุงูุณุจุจ:** 
- ุงูููู ุงูุตุญูุญุฉ ูู `inspection_type` ูู:
  - `'vehicle_receipt'` - ุงุณุชูุงู ุณูุงุฑุฉ (ุงููุญุต ุงูุฏูุฑู)
  - `'delivery_to_workshop'` - ุชุณููู ููุฑุดุฉ
  - `'receipt_from_workshop'` - ุงุณุชูุงู ูู ูุฑุดุฉ

---

### 2. **ุนุฏู ุงูุชุญูู ูู ุตุญุฉ vehicleId** โ
**ุงููููุน:** `lib/services/inspection_upload_service.dart` - ุงูุณุทุฑ 225

**ุงููุดููุฉ:**
```dart
vehicleId: int.tryParse(vehicleId) ?? 0, // โ ุฅุฐุง ูุดู ุงูุชุญูููุ ูุณุชุฎุฏู 0
```

**ุงูุญู:**
```dart
// ุชุญููู vehicleId ูู String ุฅูู int ูุน ุงูุชุญูู ูู ุงูุตุญุฉ
final parsedVehicleId = int.tryParse(vehicleId);
if (parsedVehicleId == null || parsedVehicleId <= 0) {
  return ApiResponse<bool>(
    success: false,
    message: 'ุฑูู ุงูุณูุงุฑุฉ ุบูุฑ ุตุญูุญ: $vehicleId',
  );
}
```

**ุงูุณุจุจ:**
- ุฅุฐุง ูุงู `vehicleId` ุบูุฑ ุฑููู ุฃู ูุงุฑุบุ ุณูุชู ุงุณุชุฎุฏุงู `0`
- ุงูุณูุฑูุฑ ุณูุฑูุถ ุงูุทูุจ ูุฃู `vehicle_id = 0` ุบูุฑ ุตุญูุญ

---

### 3. **ุนุฏู ูุฌูุฏ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงููุฉ** โ๏ธ
**ุงููููุน:** `lib/services/inspection_upload_service.dart` - ุฏุงูุฉ `uploadInspection()`

**ุงููุดููุฉ:**
- ูุง ุชูุฌุฏ ูุนุงูุฌุฉ ููุฃุฎุทุงุก ุนูุฏ ุฑูุน ูู ุตูุฑุฉ
- ูุง ููุฌุฏ logging ูุงูู ูุชุดุฎูุต ุงููุดุงูู

**ุงูุญู:**
- ุฅุถุงูุฉ `try-catch` ููู ุตูุฑุฉ
- ุฅุถุงูุฉ logging ููุตู ููู ุฎุทูุฉ
- ุงูุชุญูู ูู ูุฌูุฏ ุงูููู ูุจู ุงูุฑูุน

---

## โ ุงูุฅุตูุงุญุงุช ุงูุชู ุชูุช

### 1. ุชุตุญูุญ ููุน ุงููุญุต
```dart
// ูุจู
inspectionType: 'delivery',

// ุจุนุฏ
inspectionType: 'vehicle_receipt',
```

### 2. ุงูุชุญูู ูู vehicleId
```dart
// ูุจู
vehicleId: int.tryParse(vehicleId) ?? 0,

// ุจุนุฏ
final parsedVehicleId = int.tryParse(vehicleId);
if (parsedVehicleId == null || parsedVehicleId <= 0) {
  return ApiResponse<bool>(
    success: false,
    message: 'ุฑูู ุงูุณูุงุฑุฉ ุบูุฑ ุตุญูุญ: $vehicleId',
  );
}
```

### 3. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
```dart
// ุฅุถุงูุฉ try-catch ููู ุตูุฑุฉ
try {
  final uploadResult = await RequestsApiService.uploadInspectionImage(...);
  // ูุนุงูุฌุฉ ุงููุชูุฌุฉ
} catch (e) {
  debugPrint('โ [InspectionUpload] Exception uploading image ${i + 1}: $e');
  // ููุงุตู ุฑูุน ุจุงูู ุงูุตูุฑ
}
```

### 4. ุฅุถุงูุฉ logging ููุตู
```dart
debugPrint('๐ค [InspectionUpload] File path: ${file.path}');
debugPrint('๐ค [InspectionUpload] File exists: ${await file.exists()}');
debugPrint('๐ค [InspectionUpload] Upload result: ${uploadResult['success']}');
```

### 5. ุชุญุณูู ูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุฉ ูู ุงูุณูุฑูุฑ
```dart
// ุฏุนู ุฃุดูุงู ูุฎุชููุฉ ูู ุงูุงุณุชุฌุงุจุฉ
final requestId = data['data']?['request_id'] ?? data['request_id'];
```

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุฑูุน ุตูุฑุฉ ูุงุญุฏุฉ
1. ุงูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุณูุงุฑุฉ
2. ุงุถุบุท ุนูู "ุฑูุน ุตูุฑ ุงููุญุต ุงูุฏูุฑู"
3. ุฃุถู ุตูุฑุฉ ูุงุญุฏุฉ
4. ุงุถุบุท "ุฑูุน ุงูุตูุฑ"
5. ุชุญูู ูู ุงูู logs ูู Console

### 2. ุงุฎุชุจุงุฑ ุฑูุน ุนุฏุฉ ุตูุฑ
1. ุฃุถู 3-5 ุตูุฑ
2. ุฃุถู ููุงุญุธุงุช ูุจุนุถ ุงูุตูุฑ
3. ุงุถุบุท "ุฑูุน ุงูุตูุฑ"
4. ุชุญูู ูู ุฑูุน ุฌููุน ุงูุตูุฑ ุจูุฌุงุญ

### 3. ุงุฎุชุจุงุฑ ุงูุฃุฎุทุงุก
1. ุฌุฑุจ ุฑูุน ุตูุฑุฉ ุจุฏูู ุงุชุตุงู ุจุงูุฅูุชุฑูุช
2. ุชุญูู ูู ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูููุงุณุจุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. **ููุน ุงููุญุต**
- ูููุญุต ุงูุฏูุฑู: ุงุณุชุฎุฏู `'vehicle_receipt'`
- ูุง ุชุณุชุฎุฏู `'delivery'` - ูุฐุง ููุณ ููุน ูุญุต ุตุญูุญ

### 2. **vehicleId**
- ูุฌุจ ุฃู ูููู ุฑูู ุตุญูุญ (int)
- ูุง ูููู ุฃู ูููู `0` ุฃู ุณุงูุจ
- ูุชู ุงูุชุญูู ูู ุฐูู ูุจู ุงูุฅุฑุณุงู

### 3. **ุฑูุน ุงูุตูุฑ**
- ูุชู ุฑูุน ุงูุตูุฑ ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู
- ุฅุฐุง ูุดู ุฑูุน ุตูุฑุฉ ูุงุญุฏุฉุ ูุชู ูุชุงุจุนุฉ ุฑูุน ุจุงูู ุงูุตูุฑ
- ูุชู ุฅุฑุฌุงุน ุฑุณุงูุฉ ุชูุถุญ ุนุฏุฏ ุงูุตูุฑ ุงููุฑููุนุฉ ุจูุฌุงุญ

### 4. **Logging**
- ุฌููุน ุงูุฎุทูุงุช ูุชู ุชุณุฌูููุง ูู Console
- ุงุณุชุฎุฏู `debugPrint` ูุฑุคูุฉ ุงูุชูุงุตูู
- ุงุจุญุซ ุนู `[InspectionUpload]` ูู ุงูู logs

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. **`lib/services/inspection_upload_service.dart`**
   - ุชุตุญูุญ `inspectionType` ูู `'delivery'` ุฅูู `'vehicle_receipt'`
   - ุฅุถุงูุฉ ุงูุชุญูู ูู `vehicleId`
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
   - ุฅุถุงูุฉ logging ููุตู

---

## โ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุงูุฅุตูุงุญุงุช:
- โ ูุชู ุฅูุดุงุก ุทูุจ ุงููุญุต ุจูุฌุงุญ
- โ ูุชู ุฑูุน ุฌููุน ุงูุตูุฑ ุฅูู ุงูุณูุฑูุฑ
- โ ูุชู ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ ูุงุถุญุฉ
- โ ูุชู ุชุณุฌูู ุฌููุน ุงูุฎุทูุงุช ูู ุงูู logs

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

1. **ุชุญูู ูู ุงูู logs:**
   - ุงุจุญุซ ุนู `[InspectionUpload]` ูู Console
   - ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ

2. **ุชุญูู ูู:**
   - ุงุชุตุงู ุงูุฅูุชุฑูุช
   - ุตุญุฉ Token ุงููุตุงุฏูุฉ
   - ุตุญุฉ `vehicleId`
   - ูุฌูุฏ ุงููููุงุช ูุจู ุงูุฑูุน

3. **ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ:**
   - ุงุณุชุฎุฏู Postman ุฃู curl
   - ุงุฎุชุจุฑ `POST /api/v1/requests/create-car-inspection`
   - ุงุฎุชุจุฑ `POST /api/v1/requests/{id}/upload-inspection-image`

---

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุงูุฅุตูุงุญุงุช:
1. ุฃุฑุณู ุงูู logs ุงููุงููุฉ ูู Console
2. ุฃุฑุณู ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุฏูููุฉ
3. ุฃุฑุณู ูุนูููุงุช ุงูุณูุงุฑุฉ (vehicleId)

